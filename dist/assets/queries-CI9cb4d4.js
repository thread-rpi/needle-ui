import{S as ct,p as z,a as p,s as I,b as _,n as q,i as U,c as $,t as lt,d as v,f as ft,e as pt,g as J,h as Z,r as y,k as dt,u as yt}from"./index-qcK05bch.js";var mt=class extends ct{constructor(t,e){super(),this.options=e,this.#e=t,this.#o=null,this.#r=z(),this.bindMethods(),this.setOptions(e)}#e;#t=void 0;#d=void 0;#s=void 0;#i;#c;#r;#o;#y;#l;#f;#a;#h;#n;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),V(this.#t,this.options)?this.#u():this.updateResult(),this.#R())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return A(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return A(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#_(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const e=this.options,s=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof p(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#T(),this.#t.setOptions(this.options),e._defaulted&&!I(this.options,e)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&W(this.#t,s,this.options,e)&&this.#u(),this.updateResult(),r&&(this.#t!==s||p(this.options.enabled,this.#t)!==p(e.enabled,this.#t)||_(this.options.staleTime,this.#t)!==_(e.staleTime,this.#t))&&this.#m();const o=this.#b();r&&(this.#t!==s||p(this.options.enabled,this.#t)!==p(e.enabled,this.#t)||o!==this.#n)&&this.#g(o)}getOptimisticResult(t){const e=this.#e.getQueryCache().build(this.#e,t),s=this.createResult(e,t);return gt(this,s)&&(this.#s=s,this.#c=this.options,this.#i=this.#t.state),s}getCurrentResult(){return this.#s}trackResult(t,e){return new Proxy(t,{get:(s,r)=>(this.trackProp(r),e?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#r.status==="pending"&&this.#r.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,r))})}trackProp(t){this.#p.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=this.#e.defaultQueryOptions(t),s=this.#e.getQueryCache().build(this.#e,e);return s.fetch().then(()=>this.createResult(s,e))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#s))}#u(t){this.#T();let e=this.#t.fetch(this.options,t);return t?.throwOnError||(e=e.catch(q)),e}#m(){this.#_();const t=_(this.options.staleTime,this.#t);if(U||this.#s.isStale||!$(t))return;const s=lt(this.#s.dataUpdatedAt,t)+1;this.#a=v.setTimeout(()=>{this.#s.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#g(t){this.#w(),this.#n=t,!(U||p(this.options.enabled,this.#t)===!1||!$(this.#n)||this.#n===0)&&(this.#h=v.setInterval(()=>{(this.options.refetchIntervalInBackground||ft.isFocused())&&this.#u()},this.#n))}#R(){this.#m(),this.#g(this.#b())}#_(){this.#a&&(v.clearTimeout(this.#a),this.#a=void 0)}#w(){this.#h&&(v.clearInterval(this.#h),this.#h=void 0)}createResult(t,e){const s=this.#t,r=this.options,o=this.#s,i=this.#i,n=this.#c,h=t!==s?t.state:this.#d,{state:c}=t;let u={...c},g=!1,l;if(e._optimisticResults){const f=this.hasListeners(),T=!f&&V(t,e),b=f&&W(t,s,e,r);(T||b)&&(u={...u,...pt(c.data,t.options)}),e._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:F,errorUpdatedAt:Q,status:m}=u;l=u.data;let N=!1;if(e.placeholderData!==void 0&&l===void 0&&m==="pending"){let f;o?.isPlaceholderData&&e.placeholderData===n?.placeholderData?(f=o.data,N=!0):f=typeof e.placeholderData=="function"?e.placeholderData(this.#f?.state.data,this.#f):e.placeholderData,f!==void 0&&(m="success",l=J(o?.data,f,e),g=!0)}if(e.select&&l!==void 0&&!N)if(o&&l===i?.data&&e.select===this.#y)l=this.#l;else try{this.#y=e.select,l=e.select(l),l=J(o?.data,l,e),this.#l=l,this.#o=null}catch(f){this.#o=f}this.#o&&(F=this.#o,l=this.#l,Q=Date.now(),m="error");const x=u.fetchStatus==="fetching",O=m==="pending",P=m==="error",H=O&&x,B=l!==void 0,d={status:m,fetchStatus:u.fetchStatus,isPending:O,isSuccess:m==="success",isError:P,isInitialLoading:H,isLoading:H,data:l,dataUpdatedAt:u.dataUpdatedAt,error:F,errorUpdatedAt:Q,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>h.dataUpdateCount||u.errorUpdateCount>h.errorUpdateCount,isFetching:x,isRefetching:x&&!O,isLoadingError:P&&!B,isPaused:u.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:P&&B,isStale:D(t,e),refetch:this.refetch,promise:this.#r,isEnabled:p(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const f=S=>{d.status==="error"?S.reject(d.error):d.data!==void 0&&S.resolve(d.data)},T=()=>{const S=this.#r=d.promise=z();f(S)},b=this.#r;switch(b.status){case"pending":t.queryHash===s.queryHash&&f(b);break;case"fulfilled":(d.status==="error"||d.data!==b.value)&&T();break;case"rejected":(d.status!=="error"||d.error!==b.reason)&&T();break}}return d}updateResult(){const t=this.#s,e=this.createResult(this.#t,this.options);if(this.#i=this.#t.state,this.#c=this.options,this.#i.data!==void 0&&(this.#f=this.#t),I(e,t))return;this.#s=e;const s=()=>{if(!t)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!this.#p.size)return!0;const i=new Set(o??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#s).some(n=>{const a=n;return this.#s[a]!==t[a]&&i.has(a)})};this.#S({listeners:s()})}#T(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const e=this.#t;this.#t=t,this.#d=t.state,this.hasListeners()&&(e?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#R()}#S(t){Z.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(this.#s)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function bt(t,e){return p(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function V(t,e){return bt(t,e)||t.state.data!==void 0&&A(t,e,e.refetchOnMount)}function A(t,e,s){if(p(e.enabled,t)!==!1&&_(e.staleTime,t)!=="static"){const r=typeof s=="function"?s(t):s;return r==="always"||r!==!1&&D(t,e)}return!1}function W(t,e,s,r){return(t!==e||p(r.enabled,t)===!1)&&(!s.suspense||t.state.status!=="error")&&D(t,s)}function D(t,e){return p(e.enabled,t)!==!1&&t.isStaleByTime(_(e.staleTime,t))}function gt(t,e){return!I(t.getCurrentResult(),e)}var tt=y.createContext(!1),Rt=()=>y.useContext(tt);tt.Provider;function _t(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var wt=y.createContext(_t()),Tt=()=>y.useContext(wt),St=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},vt=t=>{y.useEffect(()=>{t.clearReset()},[t])},Et=({result:t,errorResetBoundary:e,throwOnError:s,query:r,suspense:o})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&(o&&t.data===void 0||dt(s,[t.error,r])),Ct=t=>{if(t.suspense){const s=o=>o==="static"?o:Math.max(o??1e3,1e3),r=t.staleTime;t.staleTime=typeof r=="function"?(...o)=>s(r(...o)):s(r),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},xt=(t,e)=>t.isLoading&&t.isFetching&&!e,Ot=(t,e)=>t?.suspense&&e.isPending,K=(t,e,s)=>e.fetchOptimistic(t).catch(()=>{s.clearReset()});function Pt(t,e,s){const r=Rt(),o=Tt(),i=yt(),n=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(n),n._optimisticResults=r?"isRestoring":"optimistic",Ct(n),St(n,o),vt(o);const a=!i.getQueryCache().get(n.queryHash),[h]=y.useState(()=>new e(i,n)),c=h.getOptimisticResult(n),u=!r&&t.subscribed!==!1;if(y.useSyncExternalStore(y.useCallback(g=>{const l=u?h.subscribe(Z.batchCalls(g)):q;return h.updateResult(),l},[h,u]),()=>h.getCurrentResult(),()=>h.getCurrentResult()),y.useEffect(()=>{h.setOptions(n)},[n,h]),Ot(n,c))throw K(n,h,o);if(Et({result:c,errorResetBoundary:o,throwOnError:n.throwOnError,query:i.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw c.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(n,c),n.experimental_prefetchInRender&&!U&&xt(c,r)&&(a?K(n,h,o):i.getQueryCache().get(n.queryHash)?.promise)?.catch(q).finally(()=>{h.updateResult()}),n.notifyOnChangeProps?c:h.trackResult(c)}function et(t,e){return Pt(t,mt)}class M extends Error{response;request;options;constructor(e,s,r){const o=e.status||e.status===0?e.status:"",i=e.statusText??"",n=`${o} ${i}`.trim(),a=n?`status code ${n}`:"an unknown error";super(`Request failed with ${a}: ${s.method} ${s.url}`),this.name="HTTPError",this.response=e,this.request=s,this.options=r}}class st extends Error{request;constructor(e){super(`Request timed out: ${e.method} ${e.url}`),this.name="TimeoutError",this.request=e}}const G=(()=>{let t=!1,e=!1;const s=typeof globalThis.ReadableStream=="function",r=typeof globalThis.Request=="function";if(s&&r)try{e=new globalThis.Request("https://empty.invalid",{body:new globalThis.ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type")}catch(o){if(o instanceof Error&&o.message==="unsupported BodyInit type")return!1;throw o}return t&&!e})(),kt=typeof globalThis.AbortController=="function",It=typeof globalThis.AbortSignal=="function"&&typeof globalThis.AbortSignal.any=="function",qt=typeof globalThis.ReadableStream=="function",Ut=typeof globalThis.FormData=="function",rt=["get","post","put","patch","head","delete"],At={json:"application/json",text:"text/*",formData:"multipart/form-data",arrayBuffer:"*/*",blob:"*/*",bytes:"*/*"},k=2147483647,Mt=new TextEncoder().encode("------WebKitFormBoundaryaxpyiPgbbPti10Rw").length,ot=Symbol("stop"),Lt={json:!0,parseJson:!0,stringifyJson:!0,searchParams:!0,prefixUrl:!0,retry:!0,timeout:!0,hooks:!0,throwHttpErrors:!0,onDownloadProgress:!0,onUploadProgress:!0,fetch:!0},Dt={method:!0,headers:!0,body:!0,mode:!0,credentials:!0,cache:!0,redirect:!0,referrer:!0,referrerPolicy:!0,integrity:!0,keepalive:!0,signal:!0,window:!0,dispatcher:!0,duplex:!0,priority:!0},jt=t=>{if(!t)return 0;if(t instanceof FormData){let e=0;for(const[s,r]of t)e+=Mt,e+=new TextEncoder().encode(`Content-Disposition: form-data; name="${s}"`).length,e+=typeof r=="string"?new TextEncoder().encode(r).length:r.size;return e}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength;if(typeof t=="string")return new TextEncoder().encode(t).length;if(t instanceof URLSearchParams)return new TextEncoder().encode(t.toString()).length;if("byteLength"in t)return t.byteLength;if(typeof t=="object"&&t!==null)try{const e=JSON.stringify(t);return new TextEncoder().encode(e).length}catch{return 0}return 0},nt=(t,e,s)=>{let r,o=0;return t.pipeThrough(new TransformStream({transform(i,n){if(n.enqueue(i),r){o+=r.byteLength;let a=e===0?0:o/e;a>=1&&(a=1-Number.EPSILON),s?.({percent:a,totalBytes:Math.max(e,o),transferredBytes:o},r)}r=i},flush(){r&&(o+=r.byteLength,s?.({percent:1,totalBytes:Math.max(e,o),transferredBytes:o},r))}}))},Ft=(t,e)=>{if(!t.body)return t;if(t.status===204)return new Response(null,{status:t.status,statusText:t.statusText,headers:t.headers});const s=Number(t.headers.get("content-length"))||0;return new Response(nt(t.body,s,e),{status:t.status,statusText:t.statusText,headers:t.headers})},Qt=(t,e,s)=>{if(!t.body)return t;const r=jt(s??t.body);return new Request(t,{duplex:"half",body:nt(t.body,r,e)})},R=t=>t!==null&&typeof t=="object",E=(...t)=>{for(const e of t)if((!R(e)||Array.isArray(e))&&e!==void 0)throw new TypeError("The `options` argument must be an object");return j({},...t)},it=(t={},e={})=>{const s=new globalThis.Headers(t),r=e instanceof globalThis.Headers,o=new globalThis.Headers(e);for(const[i,n]of o.entries())r&&n==="undefined"||n===void 0?s.delete(i):s.set(i,n);return s};function C(t,e,s){return Object.hasOwn(e,s)&&e[s]===void 0?[]:j(t[s]??[],e[s]??[])}const at=(t={},e={})=>({beforeRequest:C(t,e,"beforeRequest"),beforeRetry:C(t,e,"beforeRetry"),afterResponse:C(t,e,"afterResponse"),beforeError:C(t,e,"beforeError")}),j=(...t)=>{let e={},s={},r={};for(const o of t)if(Array.isArray(o))Array.isArray(e)||(e=[]),e=[...e,...o];else if(R(o)){for(let[i,n]of Object.entries(o))R(n)&&i in e&&(n=j(e[i],n)),e={...e,[i]:n};R(o.hooks)&&(r=at(r,o.hooks),e.hooks=r),R(o.headers)&&(s=it(s,o.headers),e.headers=s)}return e},Nt=t=>rt.includes(t)?t.toUpperCase():t,Ht=["get","put","head","delete","options","trace"],Bt=[408,413,429,500,502,503,504],zt=[413,429,503],X={limit:2,methods:Ht,statusCodes:Bt,afterStatusCodes:zt,maxRetryAfter:Number.POSITIVE_INFINITY,backoffLimit:Number.POSITIVE_INFINITY,delay:t=>.3*2**(t-1)*1e3},$t=(t={})=>{if(typeof t=="number")return{...X,limit:t};if(t.methods&&!Array.isArray(t.methods))throw new Error("retry.methods must be an array");if(t.statusCodes&&!Array.isArray(t.statusCodes))throw new Error("retry.statusCodes must be an array");return{...X,...t}};async function Jt(t,e,s,r){return new Promise((o,i)=>{const n=setTimeout(()=>{s&&s.abort(),i(new st(t))},r.timeout);r.fetch(t,e).then(o).catch(i).then(()=>{clearTimeout(n)})})}async function Vt(t,{signal:e}){return new Promise((s,r)=>{e&&(e.throwIfAborted(),e.addEventListener("abort",o,{once:!0}));function o(){clearTimeout(i),r(e.reason)}const i=setTimeout(()=>{e?.removeEventListener("abort",o),s()},t)})}const Wt=(t,e)=>{const s={};for(const r in e)!(r in Dt)&&!(r in Lt)&&!(r in t)&&(s[r]=e[r]);return s},Kt=t=>t===void 0?!1:Array.isArray(t)?t.length>0:t instanceof URLSearchParams?t.size>0:typeof t=="object"?Object.keys(t).length>0:typeof t=="string"?t.trim().length>0:!!t;class w{static create(e,s){const r=new w(e,s),o=async()=>{if(typeof r._options.timeout=="number"&&r._options.timeout>k)throw new RangeError(`The \`timeout\` option cannot be greater than ${k}`);await Promise.resolve();let a=await r._fetch();for(const h of r._options.hooks.afterResponse){const c=await h(r.request,r._options,r._decorateResponse(a.clone()));c instanceof globalThis.Response&&(a=c)}if(r._decorateResponse(a),!a.ok&&r._options.throwHttpErrors){let h=new M(a,r.request,r._options);for(const c of r._options.hooks.beforeError)h=await c(h);throw h}if(r._options.onDownloadProgress){if(typeof r._options.onDownloadProgress!="function")throw new TypeError("The `onDownloadProgress` option must be a function");if(!qt)throw new Error("Streams are not supported in your environment. `ReadableStream` is missing.");return Ft(a.clone(),r._options.onDownloadProgress)}return a},n=(r._options.retry.methods.includes(r.request.method.toLowerCase())?r._retry(o):o()).finally(async()=>{const a=r._originalRequest,h=[];a&&!a.bodyUsed&&h.push(a.body?.cancel()),r.request.bodyUsed||h.push(r.request.body?.cancel()),await Promise.all(h)});for(const[a,h]of Object.entries(At))a==="bytes"&&typeof globalThis.Response?.prototype?.bytes!="function"||(n[a]=async()=>{r.request.headers.set("accept",r.request.headers.get("accept")||h);const c=await n;if(a==="json"){if(c.status===204)return"";const u=await c.text();return u===""?"":s.parseJson?s.parseJson(u):JSON.parse(u)}return c[a]()});return n}static#e(e){return e&&typeof e=="object"&&!Array.isArray(e)&&!(e instanceof URLSearchParams)?Object.fromEntries(Object.entries(e).filter(([,s])=>s!==void 0)):e}request;abortController;_retryCount=0;_input;_options;_originalRequest;constructor(e,s={}){if(this._input=e,this._options={...s,headers:it(this._input.headers,s.headers),hooks:at({beforeRequest:[],beforeRetry:[],beforeError:[],afterResponse:[]},s.hooks),method:Nt(s.method??this._input.method??"GET"),prefixUrl:String(s.prefixUrl||""),retry:$t(s.retry),throwHttpErrors:s.throwHttpErrors!==!1,timeout:s.timeout??1e4,fetch:s.fetch??globalThis.fetch.bind(globalThis)},typeof this._input!="string"&&!(this._input instanceof URL||this._input instanceof globalThis.Request))throw new TypeError("`input` must be a string, URL, or Request");if(this._options.prefixUrl&&typeof this._input=="string"){if(this._input.startsWith("/"))throw new Error("`input` must not begin with a slash when using `prefixUrl`");this._options.prefixUrl.endsWith("/")||(this._options.prefixUrl+="/"),this._input=this._options.prefixUrl+this._input}if(kt&&It){const r=this._options.signal??this._input.signal;this.abortController=new globalThis.AbortController,this._options.signal=r?AbortSignal.any([r,this.abortController.signal]):this.abortController.signal}if(G&&(this._options.duplex="half"),this._options.json!==void 0&&(this._options.body=this._options.stringifyJson?.(this._options.json)??JSON.stringify(this._options.json),this._options.headers.set("content-type",this._options.headers.get("content-type")??"application/json")),this.request=new globalThis.Request(this._input,this._options),Kt(this._options.searchParams)){const o="?"+(typeof this._options.searchParams=="string"?this._options.searchParams.replace(/^\?/,""):new URLSearchParams(w.#e(this._options.searchParams)).toString()),i=this.request.url.replace(/(?:\?.*?)?(?=#|$)/,o);(Ut&&this._options.body instanceof globalThis.FormData||this._options.body instanceof URLSearchParams)&&!(this._options.headers&&this._options.headers["content-type"])&&this.request.headers.delete("content-type"),this.request=new globalThis.Request(new globalThis.Request(i,{...this.request}),this._options)}if(this._options.onUploadProgress){if(typeof this._options.onUploadProgress!="function")throw new TypeError("The `onUploadProgress` option must be a function");if(!G)throw new Error("Request streams are not supported in your environment. The `duplex` option for `Request` is not available.");this.request.body&&(this.request=Qt(this.request,this._options.onUploadProgress,this._options.body))}}_calculateRetryDelay(e){if(this._retryCount++,this._retryCount>this._options.retry.limit||e instanceof st)throw e;if(e instanceof M){if(!this._options.retry.statusCodes.includes(e.response.status))throw e;const r=e.response.headers.get("Retry-After")??e.response.headers.get("RateLimit-Reset")??e.response.headers.get("X-RateLimit-Reset")??e.response.headers.get("X-Rate-Limit-Reset");if(r&&this._options.retry.afterStatusCodes.includes(e.response.status)){let o=Number(r)*1e3;Number.isNaN(o)?o=Date.parse(r)-Date.now():o>=Date.parse("2024-01-01")&&(o-=Date.now());const i=this._options.retry.maxRetryAfter??o;return o<i?o:i}if(e.response.status===413)throw e}const s=this._options.retry.delay(this._retryCount);return Math.min(this._options.retry.backoffLimit,s)}_decorateResponse(e){return this._options.parseJson&&(e.json=async()=>this._options.parseJson(await e.text())),e}async _retry(e){try{return await e()}catch(s){const r=Math.min(this._calculateRetryDelay(s),k);if(this._retryCount<1)throw s;await Vt(r,{signal:this._options.signal});for(const o of this._options.hooks.beforeRetry)if(await o({request:this.request,options:this._options,error:s,retryCount:this._retryCount})===ot)return;return this._retry(e)}}async _fetch(){for(const s of this._options.hooks.beforeRequest){const r=await s(this.request,this._options);if(r instanceof Request){this.request=r;break}if(r instanceof Response)return r}const e=Wt(this.request,this._options);return this._originalRequest=this.request,this.request=this._originalRequest.clone(),this._options.timeout===!1?this._options.fetch(this._originalRequest,e):Jt(this._originalRequest,e,this.abortController,this._options)}}/*! MIT License Â© Sindre Sorhus */const L=t=>{const e=(s,r)=>w.create(s,E(t,r));for(const s of rt)e[s]=(r,o)=>w.create(r,E(t,o,{method:s}));return e.create=s=>L(E(s)),e.extend=s=>(typeof s=="function"&&(s=s(t??{})),L(E(t,s))),e.stop=ot,e},Y=L(),Gt="https://thread-app-d0d92778180a.herokuapp.com",Xt=5e3,ht=Y.create({prefixUrl:Gt,timeout:Xt,retry:{limit:0,methods:["get","put","post","delete"]},hooks:{beforeRequest:[t=>{const e=localStorage.getItem("token");e&&t.headers.set("Authorization",`Bearer ${e}`)}],afterResponse:[async(t,e,s)=>{if(s.status!==401)return;const r=localStorage.getItem("refreshToken");if(!r)return;const o=await Y.post("/auth/refresh",{json:{refreshToken:r}}).json().catch(()=>null);if(!o?.accessToken)return;localStorage.setItem("accessToken",o.accessToken);const i=new Request(t,{headers:new Headers(t.headers)});return i.headers.set("Authorization",`Bearer ${o.accessToken}`),ht(i,{retry:{limit:0}})}]}});async function ut({endpoint:t,params:e}){try{return await ht.get(t,{searchParams:e}).json()}catch(s){if(s instanceof M){const r=await s.response.json().catch();throw{status:s.response.status,...r}}throw s}}async function Yt(){try{return ut({endpoint:"health"})}catch(t){throw t}}const se=()=>et({queryKey:["health"],queryFn:()=>Yt()});async function Zt(){try{return await ut({endpoint:"api/events/recents"})}catch{throw new Error("Could not query API.")}}const re=t=>et({queryKey:["getRecentEvents"],queryFn:Zt,enabled:t});export{se as a,re as u};
