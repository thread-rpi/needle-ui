import{r,c as j,d as N,e as E,f as y,g as _,h as S,j as e}from"./index-D7KfuJcQ.js";const L=()=>{const[a,h]=r.useState(""),[i,g]=r.useState(""),[d,l]=r.useState(""),u=j(),{setUser:x}=N(),m=E(),{isSuccess:o,data:t,isError:f,error:c,isPending:p,mutate:b}=y(),{data:n}=_(o&&!!t),v=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),w=()=>{if(l(""),!a.trim()||!i.trim()){l("please fill in both fields!");return}if(!v(a.trim())){l("please enter a valid email address!");return}b({email:a.trim(),password:i})};return r.useEffect(()=>{console.log("loginData: ",t),o&&t&&(localStorage.setItem("token",t.access_token),t.refresh_token&&localStorage.setItem("refresh_token",t.refresh_token),m.invalidateQueries({queryKey:["currentAdminUser"]}))},[o,t,m]),r.useEffect(()=>{console.log("userData: ",n),n&&(x(n),u(S.admin,{replace:!0}))},[n,x,u]),r.useEffect(()=>{f&&c&&l(c.error||"An error occurred. Please try again.")},[f,c]),e.jsx("div",{className:"min-h-screen w-full bg-thread-off-white flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col w-1/2 min-w-max max-w-[400px] items-center gap-5",children:[e.jsx("div",{className:"relative flex items-center justify-center self-stretch font-black text-6xl text-thread-red text-[64px] text-center",children:"NEEDLE"}),d&&e.jsx("p",{className:"text-md text-thread-red text-center -mt-2 mb-2 font-semibold",children:d}),e.jsxs("form",{id:"login-form",onSubmit:s=>{s.preventDefault(),w()},className:"flex flex-col items-center gap-3 w-full",children:[e.jsxs("div",{className:"relative w-full h-[60px] flex items-center px-[17px]",children:[e.jsx("div",{className:"absolute inset-0 bg-white rounded-[15px] shadow-[inset_0px_3px_6px_#0000004c]"}),e.jsx("input",{type:"email",placeholder:"email",className:"relative z-10 w-full h-[44px] bg-transparent font-bold text-lg text-thread-red placeholder:text-thread-red focus:placeholder-transparent outline-none",value:a,onChange:s=>h(s.target.value)})]}),e.jsxs("div",{className:"relative w-full h-[60px] flex items-center px-[17px]",children:[e.jsx("div",{className:"absolute inset-0 bg-white rounded-[15px] shadow-[inset_0px_3px_6px_#0000004c]"}),e.jsx("input",{type:"password",placeholder:"password",className:"relative z-10 w-full h-[44px] bg-transparent font-bold text-lg text-thread-red placeholder:text-thread-red focus:placeholder-transparent outline-none",value:i,onChange:s=>g(s.target.value)})]}),e.jsx("button",{type:"submit",form:"login-form",disabled:p,className:"mt-2 flex w-auto h-auto items-center justify-center py-3 px-8 bg-thread-red rounded-full hover:bg-black transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx("div",{className:"font-bold text-white text-lg",children:p?"logging in...":"enter"})})]})]})})};export{L as default};
